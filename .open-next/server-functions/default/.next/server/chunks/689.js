"use strict";exports.id=689,exports.ids=[70,689],exports.modules={36689:(a,b,c)=>{c.r(b),c.d(b,{createOrReadKeyless:()=>v,removeKeyless:()=>w,safeParseClerkFile:()=>r});var d=c(77938),e=c(21327),f=c(91488);c(27806);var g=c(70495),h=c(40410);async function i(){var a,b,c,d,e,f;let h=await (0,g.b3)();return{nodeVersion:process.version,nextVersion:function(){var a;try{return null!=(a=process.title)?a:"unknown-process-title"}catch{return}}(),npmConfigUserAgent:process.env.npm_config_user_agent,userAgent:null!=(a=h.get("User-Agent"))?a:"unknown user-agent",port:process.env.PORT,host:null!=(b=h.get("host"))?b:"unknown host",xPort:null!=(c=h.get("x-forwarded-port"))?c:"unknown x-forwarded-port",xHost:null!=(d=h.get("x-forwarded-host"))?d:"unknown x-forwarded-host",xProtocol:null!=(e=h.get("x-forwarded-proto"))?e:"unknown x-forwarded-proto",xClerkAuthStatus:null!=(f=h.get("x-clerk-auth-status"))?f:"unknown x-clerk-auth-status",isCI:function(){let a=new Set(["","false","0","no"]);return j.some(b=>{let c=process.env[b];if(void 0===c)return!1;let d=c.trim().toLowerCase();return!a.has(d)})}()}}let j=["CI","CONTINUOUS_INTEGRATION","BUILD_NUMBER","BUILD_ID","BUILDKITE","CIRCLECI","GITHUB_ACTIONS","GITLAB_CI","JENKINS_URL","TRAVIS","APPVEYOR","WERCKER","DRONE","CODESHIP","SEMAPHORE","SHIPPABLE","TEAMCITY_VERSION","BAMBOO_BUILDKEY","GO_PIPELINE_NAME","TF_BUILD","SYSTEM_TEAMFOUNDATIONCOLLECTIONURI","BITBUCKET_BUILD_NUMBER","HEROKU_TEST_RUN_ID","VERCEL","NETLIFY"];function k(a){let b=new Headers;return a.nodeVersion&&b.set("Clerk-Node-Version",a.nodeVersion),a.nextVersion&&b.set("Clerk-Next-Version",a.nextVersion),a.npmConfigUserAgent&&b.set("Clerk-NPM-Config-User-Agent",a.npmConfigUserAgent),a.userAgent&&b.set("Clerk-Client-User-Agent",a.userAgent),a.port&&b.set("Clerk-Node-Port",a.port),a.host&&b.set("Clerk-Client-Host",a.host),a.xPort&&b.set("Clerk-X-Port",a.xPort),a.xHost&&b.set("Clerk-X-Host",a.xHost),a.xProtocol&&b.set("Clerk-X-Protocol",a.xProtocol),a.xClerkAuthStatus&&b.set("Clerk-Auth-Status",a.xClerkAuthStatus),a.isCI&&b.set("Clerk-Is-CI","true"),b}(0,h.D)([i,k]),(0,f.A)(i,"7f4c9401d0aab2b8fc13ace255d48339c4fe73ac9e",null),(0,f.A)(k,"7f41d9b8ff5ed205ea20962ab83587d90957b06ebf",null);let l=".clerk",m="clerk.lock",n=(...a)=>{let b=(0,e.dc)(),c=(0,e.y4)();return b.join(c(),l,...a)},o=".tmp",p=()=>n(o,"keyless.json"),q=!1;function r(){let{readFileSync:a}=(0,e.p8)();try{let b,c=p();try{b=a(c,{encoding:"utf-8"})||"{}"}catch{b="{}"}return JSON.parse(b)}catch{return}}let s=()=>{let{writeFileSync:a}=(0,e.p8)();q=!0,a(m,"This file can be deleted. Please delete this file and refresh your application",{encoding:"utf8",mode:"0777",flag:"w"})},t=()=>{let{rmSync:a}=(0,e.p8)();try{a(m,{force:!0,recursive:!0})}catch{}q=!1},u=()=>{let{existsSync:a}=(0,e.p8)();return q||a(m)};async function v(){let{writeFileSync:a,mkdirSync:b}=(0,e.p8)();if(u())return null;s();let c=p(),f=n(o,"README.md");b(n(o),{recursive:!0}),function(){let{existsSync:a,writeFileSync:b,readFileSync:c,appendFileSync:d}=(0,e.p8)(),f=(0,e.dc)(),g=(0,e.y4)(),h=f.join(g(),".gitignore");a(h)||b(h,""),c(h,"utf-8").includes(l+"/")||d(h,`
# clerk configuration (can include secrets)
/${l}/
`)}();let g=r();if((null==g?void 0:g.publishableKey)&&(null==g?void 0:g.secretKey))return t(),g;let h=(0,d.n)({}),j=await i().then(k).catch(()=>new Headers),m=await h.__experimental_accountlessApplications.createAccountlessApplication({requestHeaders:j}).catch(()=>null);return m&&(a(c,JSON.stringify(m),{encoding:"utf8",mode:"0777",flag:"w"}),a(f,`
## DO NOT COMMIT
This directory is auto-generated from \`@clerk/nextjs\` because you are running in Keyless mode. Avoid committing the \`.clerk/\` directory as it includes the secret key of the unclaimed instance.
  `,{encoding:"utf8",mode:"0777",flag:"w"})),t(),m}function w(){let{rmSync:a}=(0,e.p8)();if(!u()){s();try{a(n(),{force:!0,recursive:!0})}catch{}t()}}}};