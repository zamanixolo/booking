(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[623],{52:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var r=s(5155),i=s(2115);let a=function(e){let{openCreateModule:t}=e,[s,a]=(0,i.useState)({name:"",description:"",providers:[]}),[l,n]=(0,i.useState)([]);(0,i.useEffect)(()=>{(async()=>{let e=await fetch("/api/team/getActiveProvider");n(await e.json())})()});let o=e=>{let{name:t,value:s}=e.target;"price"===t||"duration"===t?a(e=>({...e,[t]:parseFloat(s)||0})):a(e=>({...e,[t]:s}))},c=async e=>{e.preventDefault();let r=await fetch("/api/services",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s})}),i=await r.json();console.log(i),201==i.status&&t()};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("form",{className:"bg-white p-6 shadow-xl w-96 max-h-[90vh] overflow-y-auto",onSubmit:c,children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Create Service"}),(0,r.jsx)("button",{type:"button",onClick:t,className:"text-gray-500 hover:text-gray-700 text-xl font-bold",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Name"}),(0,r.jsx)("input",{type:"text",name:"name",placeholder:"Service Name",value:s.name,onChange:o,className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,r.jsx)("input",{type:"text",name:"description",placeholder:"Description",value:s.description,onChange:o,className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,r.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md transition-colors",children:"Create Service"})]})]})})},l=function(e){let{openUpdateModule:t,serviceToEdit:s,onServiceUpdated:a}=e,[l,n]=(0,i.useState)({...s,description:s.description||"",providers:Array.isArray(s.providers)?s.providers.map(e=>"string"==typeof e?e:e.id):[]}),[o,c]=(0,i.useState)([]),[d,m]=(0,i.useState)(!1);(0,i.useEffect)(()=>{console.log(s)},[]);let u=e=>{let{name:t,value:s}=e.target;"price"===t||"duration"===t?n(e=>({...e,[t]:parseFloat(s)||0})):n(e=>({...e,[t]:s}))},x=async e=>{e.preventDefault(),m(!0);try{console.log("\uD83D\uDFE1 Updating service with providers:",l.providers);let e=await fetch("/api/services",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:l.id,name:l.name,description:l.description,providers:l.providers})}),t=await e.json();console.log("\uD83D\uDFE2 Update result:",t),e.ok?a():alert(t.msg||"Failed to update service")}catch(e){console.error("âŒ Error updating service:",e),alert("Error updating service. Please try again.")}finally{m(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("form",{className:"bg-white p-6 shadow-xl w-96 max-h-[90vh] overflow-y-auto",onSubmit:x,children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Update Service"}),(0,r.jsx)("button",{type:"button",onClick:t,className:"text-gray-500 hover:text-gray-700 text-xl font-bold",disabled:d,children:"\xd7"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Name"}),(0,r.jsx)("input",{type:"text",name:"name",placeholder:"Service Name",value:l.name,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,r.jsx)("input",{type:"text",name:"description",placeholder:"Description",value:l.description,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,r.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors disabled:opacity-50",disabled:d,children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md transition-colors disabled:opacity-50",disabled:d,children:d?"Updating...":"Update Service"})]})]})})},n=function(){let[e,t]=(0,i.useState)([]),[s,n]=(0,i.useState)(!0),[o,c]=(0,i.useState)(!1),[d,m]=(0,i.useState)(!1),[u,x]=(0,i.useState)(null),p=async()=>{try{n(!0);let e=await fetch("/api/services");if(!e.ok)throw Error("Failed to fetch services");let s=await e.json();t(s)}catch(e){console.error("Failed to fetch services:",e)}finally{n(!1)}};(0,i.useEffect)(()=>{p()},[]);let h=()=>{m(!1),x(null),p()},b=async e=>{if(confirm("Are you sure you want to delete this service?"))try{(await fetch("/api/services/".concat(e),{method:"DELETE"})).ok?p():alert("Failed to delete service")}catch(e){console.error("Error deleting service:",e),alert("Error deleting service")}};return s?(0,r.jsx)("div",{className:"p-4",children:"Loading services..."}):(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Services"}),(0,r.jsx)("button",{className:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800 transition-colors",onClick:()=>{c(!0)},children:"Add Service"})]}),o&&(0,r.jsx)(a,{openCreateModule:()=>{c(!1),p()}}),d&&u&&(0,r.jsx)(l,{openUpdateModule:h,serviceToEdit:u,onServiceUpdated:h}),0===e.length&&(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("h2",{className:"text-xl text-gray-500",children:"No services found"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Create your first service to get started"})]}),e.length>0&&(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>(0,r.jsxs)("div",{className:"border p-4 shadow-sm hover:shadow-md transition-shadow",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:e.name}),e.description&&(0,r.jsx)("p",{className:"text-gray-600 mb-2",children:e.description}),(0,r.jsxs)("div",{className:"mt-3 flex space-x-2",children:[(0,r.jsx)("button",{className:"text-blue-600 text-sm hover:underline",onClick:()=>{x(e),m(!0)},children:"Edit"}),(0,r.jsx)("button",{className:"text-red-600 text-sm hover:underline",onClick:()=>b(e.id),children:"Delete"})]})]},e.id))})]})}},9770:(e,t,s)=>{Promise.resolve().then(s.bind(s,52))}},e=>{e.O(0,[441,255,358],()=>e(e.s=9770)),_N_E=e.O()}]);