(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[830],{5263:(e,a,l)=>{Promise.resolve().then(l.bind(l,9441))},9441:(e,a,l)=>{"use strict";l.d(a,{default:()=>n});var s=l(5155),t=l(2115),r=l(9072);let i=function(e){let{openAddTeamMember:a}=e,[l,i]=(0,t.useState)({firstName:"",lastName:"",email:"",imageurl:"",bio:"",role:r.ProviderRole.TRAINER}),[d,o]=(0,t.useState)(""),[n,c]=(0,t.useState)(!1),m=async e=>{e.preventDefault(),c(!0);try{let e=await fetch("/api/team",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:l.firstName,lastName:l.lastName,email:l.email,password:d,imageurl:l.imageurl,bio:l.bio,role:l.role})});if(201===e.status){let l=await e.json();console.log("Created provider:",l),a()}else if(409===e.status)alert("Provider with this email already exists");else{let a=await e.json();console.error("Failed to create provider:",a)}}catch(e){console.error("Error creating provider:",e),alert("Error creating provider")}finally{c(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-white p-6 shadow-lg w-96 max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between px-4 items-center",children:[(0,s.jsx)("h2",{className:"text-xl mb-4 font-semibold",children:"Add Provider"}),(0,s.jsx)("button",{className:"text-xl mb-4 font-semibold",onClick:a,children:"x"})]}),(0,s.jsxs)("form",{onSubmit:m,children:[(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"block mb-1",children:"First Name *"}),(0,s.jsx)("input",{type:"text",className:"w-full border px-3 py-2 rounded",value:l.firstName,onChange:e=>i({...l,firstName:e.target.value}),disabled:n,required:!0})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"block mb-1",children:"Last Name *"}),(0,s.jsx)("input",{type:"text",className:"w-full border px-3 py-2 rounded",value:l.lastName,onChange:e=>i({...l,lastName:e.target.value}),disabled:n,required:!0})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"block mb-1",children:"Email"}),(0,s.jsx)("input",{type:"email",className:"w-full border px-3 py-2 rounded",value:l.email,onChange:e=>i({...l,email:e.target.value}),disabled:n})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"block mb-1",children:"Password"}),(0,s.jsx)("input",{type:"Password",className:"w-full border px-3 py-2 rounded",value:d,onChange:e=>o(e.target.value),disabled:n})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"block mb-1",children:"Bio"}),(0,s.jsx)("textarea",{className:"w-full border px-3 py-2 rounded",value:l.bio,onChange:e=>i({...l,bio:e.target.value}),disabled:n,rows:3})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"block mb-1",children:"Image URL"}),(0,s.jsx)("input",{type:"text",className:"w-full border px-3 py-2 rounded",value:l.imageurl,onChange:e=>i({...l,imageurl:e.target.value}),disabled:n,placeholder:"https://example.com/image.jpg"})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"block mb-1",children:"Provider Role"}),(0,s.jsx)("select",{className:"w-full border px-3 py-2 rounded",value:l.role,onChange:e=>i({...l,role:e.target.value}),disabled:n,children:Object.values(r.ProviderRole).map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{className:"flex justify-end mt-4",children:[(0,s.jsx)("button",{type:"button",className:"bg-gray-300 text-black px-4 py-2 mr-2",onClick:a,disabled:n,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 text-white ".concat(n?"bg-gray-400 cursor-not-allowed":"bg-blue-500"),disabled:n,children:n?"Adding...":"Add Provider"})]})]})]})})},d=function(e){let{member:a,closeModal:l}=e,[r,i]=(0,t.useState)(a),[d,o]=(0,t.useState)(!1);if(!r)return null;let n=async e=>{e.preventDefault(),o(!0);try{let e=await fetch("/api/team/",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r.id,firstName:r.firstName,lastName:r.lastName,email:r.email,imageurl:r.imageurl,bio:r.bio,role:r.role,isAvailable:r.isAvailable})});if(e.ok){let a=await e.json();console.log("Updated provider:",a),l()}else{let a=await e.json();console.error("Failed to update provider:",a),alert("Failed to update provider")}}catch(e){console.error("Error updating provider:",e),alert("Error updating provider")}finally{o(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-white p-6  shadow-lg w-96 max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Update Provider"}),(0,s.jsx)("button",{onClick:l,className:"text-gray-500 hover:text-gray-700 text-xl font-bold",disabled:d,children:"\xd7"})]}),(0,s.jsxs)("form",{onSubmit:n,children:[(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"block mb-1",children:"First Name *"}),(0,s.jsx)("input",{type:"text",value:r.firstName,className:"w-full border px-3 py-2 rounded",onChange:e=>i({...r,firstName:e.target.value}),disabled:d,required:!0})]}),(0,s.jsxs)("div",{className:"flex justify-end mt-4 space-x-2",children:[(0,s.jsx)("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 transition-colors disabled:opacity-50",onClick:l,disabled:d,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white transition-colors disabled:opacity-50 ".concat(d?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"),disabled:d,children:d?"Updating...":"Update Provider"})]})]})]})})};var o=l(7471);let n=function(){let[e,a]=(0,t.useState)(!0),[l,r]=(0,t.useState)(!1),[n,c]=(0,t.useState)([]),[m,b]=(0,t.useState)(!1),[x,u]=(0,t.useState)(null),{userId:h}=(0,o.d)(),[p,N]=(0,t.useState)(!1),j=async()=>{let e=await fetch("/api/team"),a=await e.json(),l=a.find(e=>e.clerkId===h&&(null==e?void 0:e.role)==="ADMIN");N((null==l?void 0:l.role)==="ADMIN"),c(a)};(0,t.useEffect)(()=>{(async()=>{try{j()}catch(e){console.error("Error fetching team members:",e)}})(),a(!1)},[l,m]);let f=()=>{r(!l)},g=async e=>{u(e),b(!0)},y=async e=>{try{let a=await fetch("/api/providers",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id})}),l=await a.json();alert("".concat(l.firstName," ").concat(l.lastName," was deleted")),j()}catch(e){console.error("Error fetching team members:",e)}};return e?(0,s.jsx)("div",{children:"Loading..."}):(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"Edit Team"}),p&&(0,s.jsx)("button",{className:"bg-blue-500 text-white px-4 py-2 rounded",onClick:f,children:"Add Member"}),(0,s.jsxs)("table",{className:"min-w-full mt-4 border",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-200",children:[(0,s.jsx)("th",{children:"Image"}),(0,s.jsx)("th",{className:"border px-4 py-2",children:"Name"}),(0,s.jsx)("th",{className:"border px-4 py-2",children:"Role"}),(0,s.jsx)("th",{className:"border px-4 py-2",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:0===n.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:4,className:"text-center py-4",children:"No members found"})}):n.map((e,a)=>(0,s.jsxs)("tr",{className:"text-center",children:[(0,s.jsx)("td",{className:"border px-2 h-16 flex justify-center",children:(0,s.jsx)("div",{className:"h-full w-full  relative mx-auto ",children:(0,s.jsx)("img",{src:e.imageurl||"/next.svg",alt:e.firstName,className:"rounded-full"})})}),(0,s.jsxs)("td",{className:"border px-4 py-2",children:[e.firstName," ",e.lastName]}),(0,s.jsx)("td",{className:"border px-4 py-2",children:e.role}),p&&(0,s.jsxs)("td",{className:"border px-4 py-2",children:[(0,s.jsx)("button",{className:"bg-green-500 text-white px-2 py-1 rounded mr-2",onClick:()=>g(e),children:"Edit"}),(0,s.jsx)("button",{className:"bg-red-500 text-white px-2 py-1 rounded",onClick:()=>{y(e)},children:"Delete"})]})]},a))})]}),m&&(0,s.jsx)(d,{member:x,closeModal:()=>b(!1)}),l&&p&&(0,s.jsx)(i,{openAddTeamMember:f})]})}}},e=>{e.O(0,[864,546,441,255,358],()=>e(e.s=5263)),_N_E=e.O()}]);