(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[830],{5263:(e,a,l)=>{Promise.resolve().then(l.bind(l,9441))},9441:(e,a,l)=>{"use strict";l.d(a,{default:()=>c});var s=l(5155),t=l(5239),r=l(2115),i=l(9072);let d=function(e){let{openAddTeamMember:a}=e,[l,t]=(0,r.useState)({firstName:"",lastName:"",email:"",imageurl:"",bio:"",role:i.ProviderRole.TRAINER}),[d,o]=(0,r.useState)(""),[n,c]=(0,r.useState)(!1),m=async e=>{e.preventDefault(),c(!0);try{let e=await fetch("/api/team",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:l.firstName,lastName:l.lastName,email:l.email,password:d,imageurl:l.imageurl,bio:l.bio,role:l.role})});if(201===e.status){let l=await e.json();console.log("Created provider:",l),a()}else if(409===e.status)alert("Provider with this email already exists");else{let a=await e.json();console.error("Failed to create provider:",a),alert(a.msg||"Failed to create provider")}}catch(e){console.error("Error creating provider:",e),alert("Error creating provider")}finally{c(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-white p-6 shadow-lg w-96 max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between px-4 items-center",children:[(0,s.jsx)("h2",{className:"text-xl mb-4 font-semibold",children:"Add Provider"}),(0,s.jsx)("button",{className:"text-xl mb-4 font-semibold",onClick:a,children:"x"})]}),(0,s.jsxs)("form",{onSubmit:m,children:[(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"block mb-1",children:"First Name *"}),(0,s.jsx)("input",{type:"text",className:"w-full border px-3 py-2 rounded",value:l.firstName,onChange:e=>t({...l,firstName:e.target.value}),disabled:n,required:!0})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"block mb-1",children:"Last Name *"}),(0,s.jsx)("input",{type:"text",className:"w-full border px-3 py-2 rounded",value:l.lastName,onChange:e=>t({...l,lastName:e.target.value}),disabled:n,required:!0})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"block mb-1",children:"Email"}),(0,s.jsx)("input",{type:"email",className:"w-full border px-3 py-2 rounded",value:l.email,onChange:e=>t({...l,email:e.target.value}),disabled:n})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"block mb-1",children:"Password"}),(0,s.jsx)("input",{type:"Password",className:"w-full border px-3 py-2 rounded",value:d,onChange:e=>o(e.target.value),disabled:n})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"block mb-1",children:"Bio"}),(0,s.jsx)("textarea",{className:"w-full border px-3 py-2 rounded",value:l.bio,onChange:e=>t({...l,bio:e.target.value}),disabled:n,rows:3})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"block mb-1",children:"Image URL"}),(0,s.jsx)("input",{type:"text",className:"w-full border px-3 py-2 rounded",value:l.imageurl,onChange:e=>t({...l,imageurl:e.target.value}),disabled:n,placeholder:"https://example.com/image.jpg"})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"block mb-1",children:"Provider Role"}),(0,s.jsx)("select",{className:"w-full border px-3 py-2 rounded",value:l.role,onChange:e=>t({...l,role:e.target.value}),disabled:n,children:Object.values(i.ProviderRole).map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{className:"flex justify-end mt-4",children:[(0,s.jsx)("button",{type:"button",className:"bg-gray-300 text-black px-4 py-2 mr-2",onClick:a,disabled:n,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 text-white ".concat(n?"bg-gray-400 cursor-not-allowed":"bg-blue-500"),disabled:n,children:n?"Adding...":"Add Provider"})]})]})]})})};function o(e){let{member:a,closeModal:l}=e,[t,d]=(0,r.useState)(a),[o,n]=(0,r.useState)(!1);if(!t)return null;let c=async e=>{e.preventDefault(),n(!0);try{let e=await fetch("/api/team/",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.id,firstName:t.firstName,lastName:t.lastName,email:t.email,imageurl:t.imageurl,bio:t.bio,role:t.role,isAvailable:t.isAvailable})});if(e.ok){let a=await e.json();console.log("Updated provider:",a),l()}else{let a=await e.json();console.error("Failed to update provider:",a),alert(a.msg||"Failed to update provider")}}catch(e){console.error("Error updating provider:",e),alert("Error updating provider")}finally{n(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white p-6 shadow-lg w-96 max-h-[90vh] overflow-y-auto rounded",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Update Provider"}),(0,s.jsx)("button",{onClick:l,className:"text-gray-500 hover:text-gray-700 text-xl font-bold",disabled:o,children:"\xd7"})]}),(0,s.jsxs)("form",{onSubmit:c,className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-1 font-medium",children:"First Name *"}),(0,s.jsx)("input",{type:"text",value:t.firstName,className:"w-full border px-3 py-2 rounded",onChange:e=>d({...t,firstName:e.target.value}),required:!0,disabled:o})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-1 font-medium",children:"Last Name *"}),(0,s.jsx)("input",{type:"text",value:t.lastName,className:"w-full border px-3 py-2 rounded",onChange:e=>d({...t,lastName:e.target.value}),required:!0,disabled:o})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-1 font-medium",children:"Email"}),(0,s.jsx)("input",{type:"email",value:t.email||"",className:"w-full border px-3 py-2 rounded",onChange:e=>d({...t,email:e.target.value}),disabled:o})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-1 font-medium",children:"Bio"}),(0,s.jsx)("textarea",{value:t.bio||"",className:"w-full border px-3 py-2 rounded",onChange:e=>d({...t,bio:e.target.value}),rows:3,disabled:o})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-1 font-medium",children:"Image URL"}),(0,s.jsx)("input",{type:"text",value:t.imageurl||"",className:"w-full border px-3 py-2 rounded",onChange:e=>d({...t,imageurl:e.target.value}),placeholder:"https://example.com/image.jpg",disabled:o})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-1 font-medium",children:"Role"}),(0,s.jsx)("select",{value:t.role,onChange:e=>d({...t,role:e.target.value}),className:"w-full border px-3 py-2 rounded",disabled:o,children:Object.values(i.ProviderRole).map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"flex items-center font-medium",children:[(0,s.jsx)("input",{type:"checkbox",checked:t.isAvailable||!1,onChange:e=>d({...t,isAvailable:e.target.checked}),disabled:o,className:"mr-2"}),"Available for bookings"]})}),(0,s.jsxs)("div",{className:"flex justify-end mt-4 space-x-2",children:[(0,s.jsx)("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded transition-colors disabled:opacity-50",onClick:l,disabled:o,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white rounded transition-colors disabled:opacity-50 ".concat(o?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"),disabled:o,children:o?"Updating...":"Update Provider"})]})]})]})})}var n=l(7471);let c=function(){let[e,a]=(0,r.useState)(!0),[l,c]=(0,r.useState)(!1),[m,b]=(0,r.useState)([]),[x,u]=(0,r.useState)(!1),[p,h]=(0,r.useState)(null),{userId:j}=(0,n.d)(),[N,v]=(0,r.useState)(!1),g=async()=>{try{let e=await fetch("/api/team"),a=await e.json(),l=a.find(e=>e.clerkId===j&&e.role===i.ProviderRole.ADMIN);v((null==l?void 0:l.role)===i.ProviderRole.ADMIN),b(a)}catch(e){console.error("Error fetching team members:",e)}finally{a(!1)}};(0,r.useEffect)(()=>{g()},[l,x]);let f=()=>{c(!l)},y=async e=>{try{let a=await fetch("/api/team",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),l=await a.json();alert("".concat(l.firstName," ").concat(l.lastName," was deleted")),g()}catch(e){console.error("Error deleting team member:",e)}};return e?(0,s.jsx)("div",{children:"Loading..."}):(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Edit Team"}),N&&(0,s.jsx)("button",{className:"bg-blue-500 text-white px-4 py-2 rounded",onClick:f,children:"Add Member"}),(0,s.jsxs)("table",{className:"min-w-full mt-4 border",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-200 text-left",children:[(0,s.jsx)("th",{className:"border px-4 py-2",children:"Image"}),(0,s.jsx)("th",{className:"border px-4 py-2",children:"Name"}),(0,s.jsx)("th",{className:"border px-4 py-2",children:"Role"}),N&&(0,s.jsx)("th",{className:"border px-4 py-2",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:0===m.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:4,className:"text-center py-4",children:"No members found"})}):m.map(e=>(0,s.jsxs)("tr",{className:"text-center",children:[(0,s.jsx)("td",{className:"border px-2 py-2 h-16 flex justify-center",children:(0,s.jsx)("div",{className:"h-12 w-12 relative mx-auto",children:(0,s.jsx)(t.default,{src:e.image||"/next.svg",alt:e.firstName,fill:!0,className:"rounded-full object-cover"})})}),(0,s.jsxs)("td",{className:"border px-4 py-2",children:[e.firstName," ",e.lastName]}),(0,s.jsx)("td",{className:"border px-4 py-2",children:e.role}),N&&(0,s.jsxs)("td",{className:"border px-4 py-2",children:[(0,s.jsx)("button",{className:"bg-green-500 text-white px-2 py-1 rounded mr-2",onClick:()=>{h(e),u(!0)},children:"Edit"}),(0,s.jsx)("button",{className:"bg-red-500 text-white px-2 py-1 rounded",onClick:()=>y(e),children:"Delete"})]})]},e.id))})]}),x&&p&&(0,s.jsx)(o,{member:p,closeModal:()=>u(!1)}),l&&N&&(0,s.jsx)(d,{openAddTeamMember:f})]})}}},e=>{e.O(0,[510,356,90,441,255,358],()=>e(e.s=5263)),_N_E=e.O()}]);