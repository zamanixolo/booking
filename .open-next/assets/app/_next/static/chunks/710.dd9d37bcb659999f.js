"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[710],{63:(e,t,a)=>{var s=a(7260);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSelectedLayoutSegments")&&a.d(t,{useSelectedLayoutSegments:function(){return s.useSelectedLayoutSegments}})},3710:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var s=a(5155),l=a(2115),n=a(63);let o=function(e){let{providers:t,value:a,onChange:l}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"font-medium block mb-1",children:"Provider:"}),(0,s.jsxs)("select",{className:"border rounded p-2 w-full",value:a,onChange:e=>l(e.target.value),children:[0===t.length&&(0,s.jsx)("option",{children:"No active providers"}),t.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName]},e.id))]})]})},r=function(e){let{label:t,type:a="text",value:l,onChange:n,options:o}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"font-medium block mb-1",children:t}),"textarea"===a?(0,s.jsx)("textarea",{className:"border rounded p-2 w-full",rows:3,value:l,onChange:e=>n(e.target.value)}):"select"===a&&o?(0,s.jsx)("select",{className:"border rounded p-2 w-full",value:l,onChange:e=>n(e.target.value),children:o.map(e=>(0,s.jsx)("option",{value:e,children:e},e))}):(0,s.jsx)("input",{type:a,className:"border rounded p-2 w-full",value:l,onChange:e=>n(e.target.value)})]})},i=function(e){let{booking:t,onSave:a}=e,[n,i]=(0,l.useState)(t),[u,c]=(0,l.useState)([]);(0,l.useEffect)(()=>{i(t)},[t]);let d=async()=>{try{let e=await fetch("/api/team/getActiveProvider"),t=await e.json();c(t)}catch(e){console.error(e)}};(0,l.useEffect)(()=>{d()},[]);let h=(e,t)=>{i(a=>({...a,[e]:t}))};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(o,{providers:u,value:n.provider.id,onChange:e=>{let t=u.find(t=>t.id===e);t&&h("provider",t)}}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(r,{label:"Date",type:"date",value:n.date.split("T")[0],onChange:e=>h("date",e)}),(0,s.jsx)(r,{label:"Time",type:"time",value:n.time,onChange:e=>h("time",e)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(r,{label:"Price (R)",type:"number",value:n.price,onChange:e=>h("price",parseFloat(e))}),(0,s.jsx)(r,{label:"Duration (minutes)",type:"number",value:n.sessionDuration,onChange:e=>h("sessionDuration",parseInt(e))})]}),(0,s.jsx)(r,{label:"Status",type:"select",options:["PENDING","CONFIRMED","COMPLETED","CANCELLED"],value:n.status,onChange:e=>h("status",e)}),(0,s.jsx)(r,{label:"Special Requests",type:"textarea",value:n.specialRequests||"",onChange:e=>h("specialRequests",e)}),(0,s.jsx)("button",{onClick:()=>a(n),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",children:"Save Changes"})]})},u=function(){var e,t,a,o;let{id:r}=(0,n.useParams)();(0,n.useRouter)();let[u,c]=(0,l.useState)(null),[d,h]=(0,l.useState)(!0),[p,m]=(0,l.useState)(""),g=async()=>{try{let e=await fetch("/api/booking/".concat(r));if(!e.ok)throw Error("Failed to fetch booking");let t=await e.json();console.log(t),c(t)}catch(e){m("Error fetching booking details")}finally{h(!1)}},v=async e=>{if(u)try{if(!(await fetch("/api/booking/".concat(r),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to update booking");await g(),alert("✅ Booking updated successfully!")}catch(e){console.error(e),alert("❌ Failed to update booking.")}};return((0,l.useEffect)(()=>{r&&g()},[r]),d)?(0,s.jsx)("div",{className:"p-6",children:"Loading booking..."}):p?(0,s.jsx)("div",{className:"p-6 text-red-600",children:p}):u?(0,s.jsxs)("div",{className:"p-8 max-w-2xl mx-auto bg-white rounded-lg shadow",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6",children:u.services.name}),(0,s.jsxs)("h2",{children:["client: ",null==(e=u.client)?void 0:e.firstName," ",null==(t=u.client)?void 0:t.lastName]}),(0,s.jsxs)("h2",{children:["contact: ",null==(a=u.client)?void 0:a.email," "]}),(0,s.jsxs)("h2",{children:[" ",null==(o=u.client)?void 0:o.phone," "]}),(0,s.jsx)(i,{booking:u,onSave:v})]}):(0,s.jsx)("div",{className:"p-6",children:"Booking not found"})}}}]);